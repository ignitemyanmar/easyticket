<?php $__env->startSection('content'); ?>

<?php echo HTML::style('../../../../css/hover/component.css'); ?>
<?php echo HTML::style('../../../../css/smkstyle.css'); ?>

<br>
<?php echo HTML::script('../../../../js/hover/modernizr.custom.js'); ?>
<?php echo HTML::script('../../../../js/hover/toucheffects.js'); ?>
<div class="row nopadding">
	<div class="large-1 columns">&nbsp;</div>
	<div class="large-10 columns nopadding shopping_cart">
		<div class="row nopadding">
			<div class="large-12 columns"><h3>Shopping Cart</h3></div>
		</div>
		<div class="row nopadding header">
			<div class="large-1 columns">Photo</div>
			<div class="large-2 columns">Item Name</div>
			<div class="large-2 columns">Price(Ks)</div>
			<div class="large-2 columns">Qty</div>
			<div class="large-2 columns">Size & Color</div>
			<div class="large-1 columns">Amount</div>
			<div class="large-2 columns text-right">Action</div>

		</div>
		<div class="row nopadding"><div class="large-12 column"><div class="footer_line"></div></div></div>
		<div class="row nopadding">
			<?php 
				$grand_total = 0; 
				$i = 0;
			?>
			<?php foreach($shoppingcart as $rows): ?>
			<div class="row cart_row">
				<div class="large-1 columns">
					<div class="cart_photo"><img class="center_photo" src="../../itemphoto/php/files/medium/<?php echo $rows->options->image; ?>"></div>
				</div>
				<div class="large-2 columns"><?php echo $rows->name; ?></div>
				<div class="large-2 columns"><?php echo $rows->price; ?></div>
				<div class="large-2 columns">
					<div class="large-12 columns nopadding qty"><label class="mimus" onclick="decreaseQty('<?php echo $rows->id.$i; ?>')"> - </label> <span id="qty<?php echo $rows->id.$i; ?>"><?php echo $rows->qty; ?></span> <label class="plus" onclick="increaseQty('<?php echo $rows->id.$i; ?>')">+</label></div>
				</div>
				<div class="large-2 columns"><?php echo $rows->options->color .', '.$rows->options->size; ?></div>
				<div class="large-1 columns"><?php echo $rows->subtotal; ?></div>
				<div class="large-2 columns text-right"><a href="" class="btn update" onclick="updateQty(event,'<?php echo $rows->id; ?>','<?php echo $rows->options->color_id; ?>','<?php echo $rows->options->size_id; ?>','<?php echo $rows->id.$i; ?>')">Update</a> &nbsp; <a href="../cart/<?php echo $rows->id; ?>/<?php echo $rows->options->color_id; ?>/<?php echo $rows->options->size_id; ?>/delete" class="btn delete">Delete</a></div>
				<div class="row nopadding"><div class="large-12 column"><div class="footer_line"></div></div></div>
				<?php 
					$grand_total += $rows->subtotal; 
					$i++;
				?>
			</div>
			<?php endforeach; ?>
			<div class="row">
				<div class="large-9 columns text-right"><h5>Grand Total:</h5></div>
				<div class="large-3 columns"><h5><?php echo $grand_total; ?> Kyat</h5></div>
			</div>
			<div class="row">
				<div class="large-12 columns text-right"><a href="../delivery?<?php if(Auth::check()): ?>access_token=<?php echo Auth::user()->access_token; ?><?php endif; ?>" <?php if(!Auth::check()): ?> data-reveal-id="login_register" <?php endif; ?> class="button placeorder" style="padding:10px 2px;">Place Order</a></div>
			</div>
		</div>

	</div>
	<div class="large-1 columns">&nbsp;</div>
</div>
<script type="text/javascript">	
	function increaseQty(qtyId){
		var qty = $('#qty'+qtyId).html();
		$('#qty'+qtyId).html(Number(qty) + 1);
	}

	function decreaseQty(qtyId){
		var qty = $('#qty'+qtyId).html();
		if(Number(qty) > 1)
			$('#qty'+qtyId).html(Number(qty) - 1);
	}

	function updateQty(event, item_id, color_id, size_id, qtyId){
		event.preventDefault();
		$.ajax({
			type: "POST",
			url: "/cart/"+item_id+"/"+color_id+"/"+size_id+"/"+$('#qty'+qtyId).html(),
			data: "",
		}).done(function( data ) {
		
		});

	}
	

	$(document).foundation({
	  orbit: {
	    animation: 'slide',
	    timer_speed: 1000,
	    pause_on_hover: true,
	    animation_speed: 500,
	    navigation_arrows: true,
	    bullets: true,
	    next_on_click: true
	  }
	});
</script>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('../../../../master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>